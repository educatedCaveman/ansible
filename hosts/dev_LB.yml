# base docker config
- name: configure Docker Swarm Cluster (DEV)
  hosts:
    - dev_api_LB
  roles:
    - LXC_role
    - git_dotfiles_role
    - git_scripts_role
    - LXC_netplan_MTU
    - apt_client_role
    - linux_role
    - drake_role
    - role: telegraf_role
      vars:
        telegraf_config:  'telegraf_base.conf'
    - role: nginx_role
      vars:
        source_conf:  '/home/drake/dotfiles/docker_swarm/dev_lb_nginx.conf'
        dest_conf:    '/etc/nginx/nginx.conf'
  tasks:

# # general NGINX role
# - name: configure NGINX for DEV API Load Balancer
#   hosts:
#     - dev_swarm_managers
#   roles:
#     - gluster_role
#   vars:
#     - cluster_name: "portainer_data"
#   tasks:

#     - name: setup TMUX autostart check
#       cron:
#         name: tmux_run_check
#         user: drake
#         job: "/bin/bash /home/drake/scripts/cron/tmux_check.sh docker_swarm"