# base docker config
- name: configure Portainer Host
  hosts:
    - swarm_portainer
  roles:
    - LXC_role
    - git_config_role
    - git_dotfiles_role
    - git_scripts_role
    - linux_role
    - drake_role
    - docker_role
    - nfs_base_role
    - nfs_backup_role
    - swarm_portainer_role
  tasks:

    - name: initiate the swarm (single node)
      community.docker.docker_swarm:
        state: present

    - name: setting up portainer
      debug:
        msg:
          - "to install/start portainer, run the following:" 
          - docker stack deploy -c /tmp/portainer-agent-stack.yml portainer
